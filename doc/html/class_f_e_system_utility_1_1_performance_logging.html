<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>fesystem: FESystemUtility::PerformanceLogging Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">fesystem
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_f_e_system_utility.html">FESystemUtility</a>      </li>
      <li class="navelem"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html">PerformanceLogging</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">FESystemUtility::PerformanceLogging Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="FESystemUtility::PerformanceLogging" -->
<p><code>#include &lt;<a class="el" href="_time_logs_8h_source.html">TimeLogs.h</a>&gt;</code></p>

<p><a href="class_f_e_system_utility_1_1_performance_logging-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#af403e9fe7d00616e4f4e1e570007cce9">PerformanceLogging</a> (const std::string &amp;<a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ae1f32657966d7c4c782e977c9350eaca">label_name</a>=&quot;&quot;, const bool <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#af76b0712faa751e2a0538aed9f31f21c">~PerformanceLogging</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aa288a0755a34b803fafaa2dbb510de4d">clear</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#a0b07a8455f83f278adb936f655aff8d0">start_event</a> (const std::string &amp;label, const std::string &amp;header=&quot;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ab6d21a9c0f432fb7648f3c57ae7e9a50">stop_event</a> (const std::string &amp;label, const std::string &amp;header=&quot;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#af124554a07bc041442e5a3365c36265a">pause_event</a> (const std::string &amp;label, const std::string &amp;header=&quot;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ac06d741cd62e4ddfcdb696fa00251788">restart_event</a> (const std::string &amp;label, const std::string &amp;header=&quot;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#affbbc0b29b0e7aca745967b52c18df81">get_log</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ab083993967e1158b414a0cc2011a914a">get_info_header</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#a09c90fcd7806f04b159f74024c04fd88">get_perf_info</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aac9a669630c1417f00a517543b73db08">print_log</a> () const </td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a> (const unsigned int <a class="el" href="_arpack_eigen_solver_8h.html#aea1409bb93d418b91433540cbb22abc5">n</a>, const char c, OStringStream &amp;out) const </td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ae1f32657966d7c4c782e977c9350eaca">label_name</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aa731bde127f8b8404a968b6a4060882a">tstart</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; std::pair<br class="typebreak"/>
&lt; std::string, std::string &gt;<br class="typebreak"/>
, PerfData &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, PerfData &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#af5412324481de3e8e4cea1920d7b10df">header_time</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ae8b17b2e4f7763ce602978ed4d19baa1">called</a> = false</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class has been adapted from the libMesh <code><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html">FESystemUtility::PerformanceLogging</a></code> class to change some behavior. The <code><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html">FESystemUtility::PerformanceLogging</a></code> class allows monitoring of specific events. An event is defined by a unique string that functions as a label. Each time the event is executed data are recorded. This class is particulary useful for finding performance bottlenecks. </p>

<p>Definition at line <a class="el" href="_time_logs_8h_source.html#l00043">43</a> of file <a class="el" href="_time_logs_8h_source.html">TimeLogs.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af403e9fe7d00616e4f4e1e570007cce9"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::PerformanceLogging" ref="af403e9fe7d00616e4f4e1e570007cce9" args="(const std::string &amp;label_name=&quot;&quot;, const bool log_events=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#af403e9fe7d00616e4f4e1e570007cce9">FESystemUtility::PerformanceLogging::PerformanceLogging</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label_name</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>log_events</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor. <code>label_name</code> is the name of the object, which will bw print in the log to distinguish it from other objects. <code>log_events</code> is a flag to optionally disable logging. You can use this flag to turn off logging without touching any other code. </p>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00265">265</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>

<p>References <a class="el" href="_time_logs_8_c_source.html#l00284">clear()</a>, and <a class="el" href="_time_logs_8h_source.html#l00136">log_events</a>.</p>
<div class="fragment"><pre class="fragment">                                                                       :
<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#ae1f32657966d7c4c782e977c9350eaca">label_name</a>(ln),
<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>(le)
{
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#aa288a0755a34b803fafaa2dbb510de4d">clear</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_f_e_system_utility_1_1_performance_logging_af403e9fe7d00616e4f4e1e570007cce9_cgraph.gif" border="0" usemap="#class_f_e_system_utility_1_1_performance_logging_af403e9fe7d00616e4f4e1e570007cce9_cgraph" alt=""/></div>
<map name="class_f_e_system_utility_1_1_performance_logging_af403e9fe7d00616e4f4e1e570007cce9_cgraph" id="class_f_e_system_utility_1_1_performance_logging_af403e9fe7d00616e4f4e1e570007cce9_cgraph">
<area shape="rect" id="node3" href="class_f_e_system_utility_1_1_performance_logging.html#aa288a0755a34b803fafaa2dbb510de4d" title="FESystemUtility::PerformanceLogging::clear" alt="" coords="432,5,715,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af76b0712faa751e2a0538aed9f31f21c"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::~PerformanceLogging" ref="af76b0712faa751e2a0538aed9f31f21c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#af76b0712faa751e2a0538aed9f31f21c">FESystemUtility::PerformanceLogging::~PerformanceLogging</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destructor. Calls <code><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aa288a0755a34b803fafaa2dbb510de4d">clear()</a></code> and <code><a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aac9a669630c1417f00a517543b73db08">print_log()</a></code>. </p>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00276">276</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#aac9a669630c1417f00a517543b73db08">print_log</a>();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a45604e0fbd895ed0cc4d8905ba13129b"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::_character_line" ref="a45604e0fbd895ed0cc4d8905ba13129b" args="(const unsigned int n, const char c, OStringStream &amp;out) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">FESystemUtility::PerformanceLogging::_character_line</a> </td>
          <td>(</td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OStringStream &amp;&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Prints a line of 'n' repeated characters 'c' to the output string stream "out". </p>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00775">775</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>

<p>References <a class="el" href="_arpack_eigen_solver_8h_source.html#l00290">n</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="_arpack_eigen_solver_8h.html#aea1409bb93d418b91433540cbb22abc5">n</a>; ++i)
    out &lt;&lt; c;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa288a0755a34b803fafaa2dbb510de4d"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::clear" ref="aa288a0755a34b803fafaa2dbb510de4d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aa288a0755a34b803fafaa2dbb510de4d">FESystemUtility::PerformanceLogging::clear</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears all the internal data and returns the data structures to a pristine state. This function checks to see if it is currently monitoring any events, and if so errors. Be sure you are not logging any events when you call this function. </p>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00284">284</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>

<p>Referenced by <a class="el" href="_time_logs_8_c_source.html#l00265">PerformanceLogging()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    {
    <span class="comment">//  check that all events are closed</span>
    <span class="keywordflow">for</span> (std::map&lt;std::pair&lt;std::string,std::string&gt;, PerfData&gt;::iterator
         pos = <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.begin(); pos != <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.end(); ++pos)
      <span class="keywordflow">if</span> (pos-&gt;second.open)
        {
        std::cout
              &lt;&lt; <span class="stringliteral">&quot;ERROR clearning performance log for class &quot;</span>
              &lt;&lt; <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#ae1f32657966d7c4c782e977c9350eaca">label_name</a> &lt;&lt; std::endl
              &lt;&lt; <span class="stringliteral">&quot;event &quot;</span> &lt;&lt; pos-&gt;first.second &lt;&lt; <span class="stringliteral">&quot; is still being monitored!&quot;</span>
              &lt;&lt; std::endl;
        
        libmesh_error();
        }
        
        
        gettimeofday (&amp;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#aa731bde127f8b8404a968b6a4060882a">tstart</a>, NULL);
    
    <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.clear();
    <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#af5412324481de3e8e4cea1920d7b10df">header_time</a>.clear();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab083993967e1158b414a0cc2011a914a"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::get_info_header" ref="ab083993967e1158b414a0cc2011a914a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ab083993967e1158b414a0cc2011a914a">FESystemUtility::PerformanceLogging::get_info_header</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>a string containing ONLY the information header. </dd></dl>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00311">311</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>

<p>References <a class="el" href="_f_e_system_common_8h_source.html#l00022">FESystem::local_processor</a>, and <a class="el" href="_f_e_system_common_8h_source.html#l00019">FESystem::total_processors</a>.</p>
<div class="fragment"><pre class="fragment">{
  OStringStream out;
  
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    {
    
<span class="preprocessor">#ifdef HAVE_LOCALE</span>
<span class="preprocessor"></span>    OStringStream  dateStr;
    time_t tm         = time(NULL);
    <span class="keyword">struct </span>tm* tmb    = localtime(&amp;tm);
    std::locale loc;
    TimeIter            begin(dateStr);
    <span class="keyword">const</span> TimePut&amp; tp = std::use_facet&lt;TimePut&gt;(loc);
    tp.put(begin,
           dateStr,
           dateStr.fill(),
           tmb,
           <span class="charliteral">&#39;c&#39;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    
    <span class="comment">// Get system information</span>
    <span class="keyword">struct </span>utsname sysInfo;
    uname(&amp;sysInfo);
    
    <span class="comment">// Get user information</span>
    <span class="keyword">struct </span>passwd* p = getpwuid(getuid());
    out &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    
    <span class="comment">// Construct string stream objects for each of the outputs</span>
    OStringStream pid_stream;
    OStringStream nprocs_stream;
    OStringStream time_stream;
    OStringStream os_stream;
    OStringStream host_stream;
    OStringStream osrel_stream;
    OStringStream osver_stream;
    OStringStream machine_stream;
    OStringStream user_stream;
    
    <span class="comment">// Put pointers to these streams in a vector</span>
    std::vector&lt;OStringStream*&gt; v(9);
    v[0] = &amp;pid_stream;
    v[1] = &amp;nprocs_stream;
    v[2] = &amp;time_stream;
    v[3] = &amp;os_stream;
    v[4] = &amp;host_stream;
    v[5] = &amp;osrel_stream;
    v[6] = &amp;osver_stream;
    v[7] = &amp;machine_stream;
    v[8] = &amp;user_stream;
    
    <span class="comment">// Fill string stream objects</span>
    <span class="keywordflow">if</span> (libMesh::n_processors() &gt; 1)
      {
      pid_stream     &lt;&lt; <span class="stringliteral">&quot;| Processor id:   &quot;</span> &lt;&lt; <a class="code" href="namespace_f_e_system.html#a53399996849d09877c3231214d49478a" title="local processor ID">FESystem::local_processor</a>; 
      nprocs_stream  &lt;&lt; <span class="stringliteral">&quot;| Num Processors: &quot;</span> &lt;&lt; <a class="code" href="namespace_f_e_system.html#ae4bbcaae357aaeff9ceaba59c7632726" title="total number of processors in this communicator">FESystem::total_processors</a>;
      }
    
<span class="preprocessor">#ifdef HAVE_LOCALE                                                     </span>
<span class="preprocessor"></span>    time_stream    &lt;&lt; <span class="stringliteral">&quot;| Time:           &quot;</span> &lt;&lt; dateStr.str()          ; 
<span class="preprocessor">#endif                                                                 </span>
<span class="preprocessor"></span>    
    os_stream      &lt;&lt; <span class="stringliteral">&quot;| OS:             &quot;</span> &lt;&lt; sysInfo.sysname        ; 
    host_stream    &lt;&lt; <span class="stringliteral">&quot;| HostName:       &quot;</span> &lt;&lt; sysInfo.nodename       ; 
    osrel_stream   &lt;&lt; <span class="stringliteral">&quot;| OS Release:     &quot;</span> &lt;&lt; sysInfo.release        ; 
    osver_stream   &lt;&lt; <span class="stringliteral">&quot;| OS Version:     &quot;</span> &lt;&lt; sysInfo.version        ; 
    machine_stream &lt;&lt; <span class="stringliteral">&quot;| Machine:        &quot;</span> &lt;&lt; sysInfo.machine        ; 
    user_stream    &lt;&lt; <span class="stringliteral">&quot;| Username:       &quot;</span> &lt;&lt; p-&gt;pw_name             ; 
    
    <span class="comment">// Find the longest string, use that to set the line length for formatting.</span>
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_length = 0;
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;v.size(); ++i)
      <span class="keywordflow">if</span> (v[i]-&gt;str().size() &gt; max_length)
        max_length = v[i]-&gt;str().size();
    
    <span class="comment">// Print dashed line</span>
    this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a>(max_length+2, <span class="charliteral">&#39;-&#39;</span>, out);
    out &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
    
    <span class="comment">// Loop over all the strings and print them out with end-formatting</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;v.size(); ++i)
      {
      <span class="keywordflow">if</span> (v[i]-&gt;str().size() &gt; 0)
        {
              out &lt;&lt; v[i]-&gt;str();
              OSSStringright(out, max_length+4 - v[i]-&gt;str().size(), <span class="stringliteral">&quot;|\n&quot;</span>);
        }
      }
    
    <span class="comment">// Print dashed line</span>
    this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a>(max_length+2, <span class="charliteral">&#39;-&#39;</span>, out);
    out &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
    }
  
  <span class="keywordflow">return</span> out.str();
}
</pre></div>
</div>
</div>
<a class="anchor" id="affbbc0b29b0e7aca745967b52c18df81"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::get_log" ref="affbbc0b29b0e7aca745967b52c18df81" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#affbbc0b29b0e7aca745967b52c18df81">FESystemUtility::PerformanceLogging::get_log</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>a string containing: (1) Basic machine information (if first call) (2) The performance log </dd></dl>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00620">620</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>
<div class="fragment"><pre class="fragment">{
  OStringStream out;
  
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    {
    <span class="comment">// Only print the log</span>
    <span class="comment">// if it isn&#39;t empty</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.empty())
      {
      <span class="comment">// Possibly print machine info,</span>
      <span class="comment">// but only do this once</span>
      <span class="keywordflow">if</span> (!<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#ae8b17b2e4f7763ce602978ed4d19baa1">called</a>)
        {
              <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#ae8b17b2e4f7763ce602978ed4d19baa1">called</a> = <span class="keyword">true</span>;
              out &lt;&lt; <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#ab083993967e1158b414a0cc2011a914a">get_info_header</a>();
        }         
      out &lt;&lt; <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a09c90fcd7806f04b159f74024c04fd88">get_perf_info</a>();
      }
    }
  
  <span class="keywordflow">return</span> out.str();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a09c90fcd7806f04b159f74024c04fd88"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::get_perf_info" ref="a09c90fcd7806f04b159f74024c04fd88" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#a09c90fcd7806f04b159f74024c04fd88">FESystemUtility::PerformanceLogging::get_perf_info</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>a string containing ONLY the log information </dd></dl>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00412">412</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>
<div class="fragment"><pre class="fragment">{
  OStringStream out;
  
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a> &amp;&amp; !<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.empty())
    {
    <span class="comment">// Stop timing for this event.</span>
    <span class="keyword">struct </span>timeval tstop;
    
    gettimeofday (&amp;tstop, NULL);
          
    <span class="keyword">const</span> <span class="keywordtype">double</span> elapsed_time = (<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(tstop.tv_sec  - <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#aa731bde127f8b8404a968b6a4060882a">tstart</a>.tv_sec) +
                                 static_cast&lt;double&gt;(tstop.tv_usec - <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#aa731bde127f8b8404a968b6a4060882a">tstart</a>.tv_usec)*1.e-6);
    
    <span class="comment">// Figure out the formatting required based on the event names</span>
    <span class="comment">// Unsigned ints for each of the column widths</span>
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> event_col_width            = 30;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ncalls_col_width     = 10;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tot_time_col_width   = 12;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> avg_time_col_width   = 12;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pct_active_col_width = 13;
    
    <span class="comment">// Iterator to be used to loop over the map of timed events</span>
    std::map&lt;std::pair&lt;std::string,std::string&gt;, PerfData&gt;::const_iterator pos;
    
    <span class="comment">// Reset the event column width based on the longest event name plus</span>
    <span class="comment">// a possible 2-character indentation, plus a space.</span>
    <span class="keywordflow">for</span> (pos = <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.begin(); pos != <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.end(); ++pos)
      <span class="keywordflow">if</span> (pos-&gt;first.second.size()+3 &gt; event_col_width)
        event_col_width = pos-&gt;first.second.size()+3;
    
    <span class="comment">// Set the total width of the column</span>
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total_col_width =
      event_col_width     +
      ncalls_col_width    +
      tot_time_col_width  +
      avg_time_col_width  +
      pct_active_col_width+1;
    
    <span class="comment">// Print dashed line</span>
    out &lt;&lt; <span class="charliteral">&#39; &#39;</span>;
    this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a>(total_col_width, <span class="charliteral">&#39;-&#39;</span>, out);
    out &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
    
    {
      <span class="comment">// Construct temporary message string</span>
      OStringStream temp;
      temp &lt;&lt; <span class="stringliteral">&quot;| &quot;</span> &lt;&lt; <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#ae1f32657966d7c4c782e977c9350eaca">label_name</a> &lt;&lt; <span class="stringliteral">&quot; Performance: Alive time=&quot;</span> &lt;&lt; elapsed_time;
      
      <span class="comment">// Get the size of the temporary string</span>
      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> temp_size = temp.str().size();
      
      <span class="comment">// Send the temporary message to the output</span>
      out &lt;&lt; temp.str();
      
      <span class="comment">// If this string is longer than the previously computed total</span>
      <span class="comment">// column width, skip the additional formatting... this shouldn&#39;t</span>
      <span class="comment">// happen often, hopefully.  Add two additional characters for a</span>
      <span class="comment">// space and a &quot;|&quot; character at the end.</span>
      <span class="keywordflow">if</span> (temp_size &lt; total_col_width+2)
        {
        OSSStringright(out, total_col_width-temp_size+2, <span class="stringliteral">&quot;|&quot;</span>);
        }
      
      out &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
    }
    
    <span class="comment">// Print dashed line</span>
    out &lt;&lt; <span class="charliteral">&#39; &#39;</span>;
    this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a>(total_col_width, <span class="charliteral">&#39;-&#39;</span>, out);
    out &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
    
    
    <span class="comment">// Write out the header for the events listing</span>
    out &lt;&lt; <span class="stringliteral">&quot;| &quot;</span>;
    OSSStringleft(out,event_col_width,<span class="stringliteral">&quot;Event&quot;</span>);      
    OSSStringleft(out,ncalls_col_width,<span class="stringliteral">&quot;nCalls&quot;</span>);      
    OSSStringleft(out,tot_time_col_width,<span class="stringliteral">&quot;Total&quot;</span>);      
    OSSStringleft(out,avg_time_col_width,<span class="stringliteral">&quot;Avg&quot;</span>);      
    OSSStringleft(out,pct_active_col_width,<span class="stringliteral">&quot;Percent of&quot;</span>);      
    out &lt;&lt; <span class="stringliteral">&quot;|\n&quot;</span>;      
    out &lt;&lt; <span class="stringliteral">&quot;| &quot;</span>;
    OSSStringleft(out,event_col_width,<span class="stringliteral">&quot;&quot;</span>);
    OSSStringleft(out,ncalls_col_width,<span class="stringliteral">&quot;&quot;</span>);
    OSSStringleft(out,tot_time_col_width,<span class="stringliteral">&quot;Time&quot;</span>);
    OSSStringleft(out,avg_time_col_width,<span class="stringliteral">&quot;Time&quot;</span>);
    OSSStringleft(out,pct_active_col_width,<span class="stringliteral">&quot;Active Time&quot;</span>);
    
    out &lt;&lt; <span class="stringliteral">&quot;|\n|&quot;</span>;
    this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a>(total_col_width, <span class="charliteral">&#39;-&#39;</span>, out);
    out &lt;&lt; <span class="stringliteral">&quot;|\n|&quot;</span>;
    this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a>(total_col_width, <span class="charliteral">&#39; &#39;</span>, out);
    out &lt;&lt; <span class="stringliteral">&quot;|\n&quot;</span>;
    
    std::string last_header(<span class="stringliteral">&quot;&quot;</span>);
    pos = <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.begin();
    
    <span class="keywordflow">while</span> ( pos != <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.end())
      {
      <span class="keyword">const</span> PerfData&amp; perf_data = pos-&gt;second;
      <span class="keyword">const</span> PerfData&amp; header_perf_data = this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#af5412324481de3e8e4cea1920d7b10df">header_time</a>.find(pos-&gt;first.first)-&gt;second;
      
<span class="comment">//      // Only print the event if the count is non-zero.</span>
<span class="comment">//      if (perf_data.count != 0)</span>
<span class="comment">//        {</span>
              <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> perf_count    = perf_data.count;
              <span class="keyword">const</span> <span class="keywordtype">double</span>       perf_time     = perf_data.tot_time;
              <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> header_perf_count    = header_perf_data.count;
              <span class="keyword">const</span> <span class="keywordtype">double</span>       header_perf_time     = header_perf_data.tot_time;
              <span class="keyword">const</span> <span class="keywordtype">double</span>       perf_avg_time = perf_time / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(perf_count);
              <span class="keyword">const</span> <span class="keywordtype">double</span>       perf_percent  = (header_perf_time != 0.) ? perf_time / header_perf_time * 100. : 0.;
                
              <span class="comment">// Print the event name</span>
              <span class="keywordflow">if</span> (pos-&gt;first.first == <span class="stringliteral">&quot;&quot;</span>)
          {
          out &lt;&lt; <span class="stringliteral">&quot;| &quot;</span>;
          OSSStringleft(out,event_col_width,pos-&gt;first.second);
          }
              <span class="keywordflow">else</span>
          {
          <span class="keywordflow">if</span> (last_header != pos-&gt;first.first)
            {
            last_header = pos-&gt;first.first;

            <span class="comment">// print blank line</span>
            out &lt;&lt; <span class="stringliteral">&quot;|&quot;</span>;
            this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a>(total_col_width, <span class="charliteral">&#39; &#39;</span>, out);
            out &lt;&lt; <span class="stringliteral">&quot;|\n&quot;</span>;
            
            <span class="comment">// print header name (account for additional space before</span>
            <span class="comment">// the header)</span>
            out &lt;&lt; <span class="stringliteral">&quot;| &quot;</span>;
            OSSStringleft(out, total_col_width-1, pos-&gt;first.first);
            out &lt;&lt; <span class="stringliteral">&quot;|\n&quot;</span>;
            }
          
          out &lt;&lt; <span class="stringliteral">&quot;|   &quot;</span>;
          OSSStringleft(out, event_col_width-2, pos-&gt;first.second);
          }
              
        
              <span class="comment">// Print the number of calls to the event.  </span>
              OSSInt(out,ncalls_col_width,perf_count);
        
              <span class="comment">// Print the total time spent in the event</span>
              out.setf(std::ios::fixed);
              OSSRealleft(out,tot_time_col_width,4,perf_time);
        
              <span class="comment">// Print the average time per function call</span>
              OSSRealleft(out,avg_time_col_width,6,perf_avg_time);
        
              <span class="comment">// Print the percentage of the time spent in the event</span>
              OSSRealleft(out,pct_active_col_width,2,perf_percent);
              
              out &lt;&lt; <span class="stringliteral">&quot;|&quot;</span>;
              out &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<span class="comment">//        }</span>
        
        <span class="comment">// check if the next header is different from the current header. If it is, </span>
        <span class="comment">// a summary of the current header needs to be printed</span>
        pos++;
        <span class="keywordflow">if</span> (pos == <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>.end() || last_header != pos-&gt;first.first)
          {
          <span class="comment">// print summary</span>
          out &lt;&lt; <span class="charliteral">&#39; &#39;</span>;
          this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a>(total_col_width, <span class="charliteral">&#39;-&#39;</span>, out);
          out &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
          out &lt;&lt; <span class="stringliteral">&quot;| &quot;</span>;
          OSSStringleft(out,event_col_width,<span class="stringliteral">&quot;Totals:&quot;</span>);
          
          <span class="comment">// Print the total number of logged function calls</span>
          <span class="comment">// For routines which are called many times, summed_function_calls may</span>
          <span class="comment">// exceed 7 digits.  If this happens use, scientific notation.</span>
          <span class="keywordflow">if</span> (header_perf_count &lt; 9999999)
            {
            OSSInt(out,ncalls_col_width, header_perf_count);
            }
          
          <span class="keywordflow">else</span>
            {
            out.setf(std::ios::scientific);
            OSSRealleft(out, ncalls_col_width, 3, static_cast&lt;Real&gt;(header_perf_count));
            out.unsetf(std::ios::scientific);
            }
          
          <span class="comment">// Print the total time spent in logged function calls</span>
          out.setf(std::ios::fixed);
          OSSRealleft(out,tot_time_col_width,4,header_perf_time);
          
          <span class="comment">// Null, the average time doesn&#39;t make sense as a total</span>
          out.width(avg_time_col_width);
          out &lt;&lt; <span class="stringliteral">&quot;&quot;</span>;
          
          <span class="comment">// Print the total percentage</span>
          OSSRealleft(out,pct_active_col_width,2,<span class="charliteral">&#39; &#39;</span>);
          
          out &lt;&lt; <span class="stringliteral">&quot;|\n &quot;</span>;
          this-&gt;<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a45604e0fbd895ed0cc4d8905ba13129b">_character_line</a>(total_col_width, <span class="charliteral">&#39;-&#39;</span>, out);
          out &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
          }
      }
    }
  
  <span class="keywordflow">return</span> out.str();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af124554a07bc041442e5a3365c36265a"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::pause_event" ref="af124554a07bc041442e5a3365c36265a" args="(const std::string &amp;label, const std::string &amp;header=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#af124554a07bc041442e5a3365c36265a">FESystemUtility::PerformanceLogging::pause_event</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>header</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Suspend monitoring of the event. </p>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00717">717</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    {
    <span class="comment">// Get a reference to the event data to avoid</span>
    <span class="comment">// repeated map lookups</span>
    PerfData&amp; perf_data = <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>[std::make_pair(header,label)];
    PerfData&amp; header_perf_data = <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#af5412324481de3e8e4cea1920d7b10df">header_time</a>[header];
    
    <span class="comment">// make sure we are currently</span>
    <span class="comment">// monitoring this event</span>
    <span class="keywordflow">if</span> (!perf_data.open)
      {
      std::cerr &lt;&lt; <span class="stringliteral">&quot;ERROR pausing event &quot;</span> &lt;&lt; label &lt;&lt; std::endl
                    &lt;&lt; <span class="stringliteral">&quot;Did you forget to start logging it?&quot;</span> &lt;&lt; std::endl;        
      libmesh_error();
      }
    
    <span class="keyword">struct </span>timeval tstop;
    
    gettimeofday (&amp;tstop, NULL);
    
    <span class="keyword">const</span> <span class="keywordtype">double</span> elapsed_time = (<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(tstop.tv_sec  - perf_data.tstart.tv_sec) +
                                 static_cast&lt;double&gt;(tstop.tv_usec - perf_data.tstart.tv_usec)*1.e-6);      
    
    perf_data.tot_time += elapsed_time;
    header_perf_data.tot_time += elapsed_time;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aac9a669630c1417f00a517543b73db08"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::print_log" ref="aac9a669630c1417f00a517543b73db08" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aac9a669630c1417f00a517543b73db08">FESystemUtility::PerformanceLogging::print_log</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Print the log. </p>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00646">646</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    std::cout &lt;&lt; <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#affbbc0b29b0e7aca745967b52c18df81">get_log</a>() &lt;&lt; std::endl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac06d741cd62e4ddfcdb696fa00251788"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::restart_event" ref="ac06d741cd62e4ddfcdb696fa00251788" args="(const std::string &amp;label, const std::string &amp;header=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ac06d741cd62e4ddfcdb696fa00251788">FESystemUtility::PerformanceLogging::restart_event</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>header</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Restart monitoring the event. </p>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00750">750</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    {
    <span class="comment">// Get a reference to the event data to avoid</span>
    <span class="comment">// repeated map lookups</span>
    PerfData&amp; perf_data = <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>[std::make_pair(header,label)];
    
    <span class="comment">// make sure we are currently</span>
    <span class="comment">// monitoring this event</span>
    <span class="keywordflow">if</span> (!perf_data.open)
      {
      std::cerr &lt;&lt; <span class="stringliteral">&quot;ERROR restarting event &quot;</span> &lt;&lt; label &lt;&lt; std::endl
                    &lt;&lt; <span class="stringliteral">&quot;Did you forget to start or pause it?&quot;</span> &lt;&lt; std::endl;       
      libmesh_error();
      }
    
    gettimeofday (&amp;perf_data.tstart, NULL);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0b07a8455f83f278adb936f655aff8d0"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::start_event" ref="a0b07a8455f83f278adb936f655aff8d0" args="(const std::string &amp;label, const std::string &amp;header=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#a0b07a8455f83f278adb936f655aff8d0">FESystemUtility::PerformanceLogging::start_event</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>header</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Start monitoring the event named <code>label</code>. </p>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00654">654</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    {
    <span class="comment">// Get a reference to the event data to avoid</span>
    <span class="comment">// repeated map lookups</span>
    PerfData&amp; perf_data = <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>[std::make_pair(header,label)];
    
    <span class="comment">// make sure we aren&#39;t currently</span>
    <span class="comment">// monitoring this event      </span>
    <span class="keywordflow">if</span> (perf_data.open)
      {
      std::cerr &lt;&lt; <span class="stringliteral">&quot;ERROR logging event &quot;</span> &lt;&lt; label &lt;&lt; std::endl
                    &lt;&lt; <span class="stringliteral">&quot;Did you forget to stop logging it?&quot;</span> &lt;&lt; std::endl;
      libmesh_error();
      }
    
    perf_data.open = <span class="keyword">true</span>;
    
    gettimeofday (&amp;perf_data.tstart, NULL);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab6d21a9c0f432fb7648f3c57ae7e9a50"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::stop_event" ref="ab6d21a9c0f432fb7648f3c57ae7e9a50" args="(const std::string &amp;label, const std::string &amp;header=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ab6d21a9c0f432fb7648f3c57ae7e9a50">FESystemUtility::PerformanceLogging::stop_event</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>header</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stop monitoring the event named <code>label</code>. </p>

<p>Definition at line <a class="el" href="_time_logs_8_c_source.html#l00680">680</a> of file <a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">log_events</a>)
    {
    <span class="comment">// Get a reference to the event data to avoid</span>
    <span class="comment">// repeated map lookups</span>
    PerfData&amp; perf_data = <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">log</a>[std::make_pair(header,label)];
    PerfData&amp; header_perf_data = <a class="code" href="class_f_e_system_utility_1_1_performance_logging.html#af5412324481de3e8e4cea1920d7b10df">header_time</a>[header];
    
    <span class="comment">// make sure we are currently</span>
    <span class="comment">// monitoring this event</span>
    <span class="keywordflow">if</span> (!perf_data.open)
      {
      std::cerr &lt;&lt; <span class="stringliteral">&quot;ERROR logging event &quot;</span> &lt;&lt; label &lt;&lt; std::endl
                    &lt;&lt; <span class="stringliteral">&quot;Did you forget to start or restart it?&quot;</span> &lt;&lt; std::endl;
      libmesh_error();
      }
    
    perf_data.open = <span class="keyword">false</span>;
    
    <span class="keyword">struct </span>timeval tstop;
    
    gettimeofday (&amp;tstop, NULL);
    
    <span class="keyword">const</span> <span class="keywordtype">double</span> elapsed_time = (<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(tstop.tv_sec  - perf_data.tstart.tv_sec) +
                                 static_cast&lt;double&gt;(tstop.tv_usec - perf_data.tstart.tv_usec)*1.e-6);      
    
    perf_data.tot_time += elapsed_time;
    perf_data.count++;
    header_perf_data.tot_time += elapsed_time;
    header_perf_data.count++;
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ae8b17b2e4f7763ce602978ed4d19baa1"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::called" ref="ae8b17b2e4f7763ce602978ed4d19baa1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ae8b17b2e4f7763ce602978ed4d19baa1">FESystemUtility::PerformanceLogging::called</a> = false<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag indicating if <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aac9a669630c1417f00a517543b73db08">print_log()</a> has been called. This is used to print a header with machine-specific data the first time that <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aac9a669630c1417f00a517543b73db08">print_log()</a> is called. </p>

<p>Definition at line <a class="el" href="_time_logs_8h_source.html#l00162">162</a> of file <a class="el" href="_time_logs_8h_source.html">TimeLogs.h</a>.</p>

</div>
</div>
<a class="anchor" id="af5412324481de3e8e4cea1920d7b10df"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::header_time" ref="af5412324481de3e8e4cea1920d7b10df" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, PerfData&gt; <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#af5412324481de3e8e4cea1920d7b10df">FESystemUtility::PerformanceLogging::header_time</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The log of time spent in each header </p>

<p>Definition at line <a class="el" href="_time_logs_8h_source.html#l00154">154</a> of file <a class="el" href="_time_logs_8h_source.html">TimeLogs.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae1f32657966d7c4c782e977c9350eaca"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::label_name" ref="ae1f32657966d7c4c782e977c9350eaca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#ae1f32657966d7c4c782e977c9350eaca">FESystemUtility::PerformanceLogging::label_name</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the total time spent on this event. The label for this object. </dd></dl>

<p>Definition at line <a class="el" href="_time_logs_8h_source.html#l00131">131</a> of file <a class="el" href="_time_logs_8h_source.html">TimeLogs.h</a>.</p>

</div>
</div>
<a class="anchor" id="adf1487053f84d2bc80fe62956f706814"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::log" ref="adf1487053f84d2bc80fe62956f706814" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::pair&lt;std::string, std::string&gt;, PerfData&gt; <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#adf1487053f84d2bc80fe62956f706814">FESystemUtility::PerformanceLogging::log</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The actual log. </p>

<p>Definition at line <a class="el" href="_time_logs_8h_source.html#l00148">148</a> of file <a class="el" href="_time_logs_8h_source.html">TimeLogs.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2f13e4324e88bde5f9c954dfe27473cc"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::log_events" ref="a2f13e4324e88bde5f9c954dfe27473cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#a2f13e4324e88bde5f9c954dfe27473cc">FESystemUtility::PerformanceLogging::log_events</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag to optionally disable all logging. </p>

<p>Definition at line <a class="el" href="_time_logs_8h_source.html#l00136">136</a> of file <a class="el" href="_time_logs_8h_source.html">TimeLogs.h</a>.</p>

<p>Referenced by <a class="el" href="_time_logs_8_c_source.html#l00265">PerformanceLogging()</a>.</p>

</div>
</div>
<a class="anchor" id="aa731bde127f8b8404a968b6a4060882a"></a><!-- doxytag: member="FESystemUtility::PerformanceLogging::tstart" ref="aa731bde127f8b8404a968b6a4060882a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval <a class="el" href="class_f_e_system_utility_1_1_performance_logging.html#aa731bde127f8b8404a968b6a4060882a">FESystemUtility::PerformanceLogging::tstart</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The time we were constructed or last cleared. </p>

<p>Definition at line <a class="el" href="_time_logs_8h_source.html#l00141">141</a> of file <a class="el" href="_time_logs_8h_source.html">TimeLogs.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/manav/Documents/codes/FESystemOld/FESystem/src/Utilities/<a class="el" href="_time_logs_8h_source.html">TimeLogs.h</a></li>
<li>/Users/manav/Documents/codes/FESystemOld/FESystem/src/Utilities/<a class="el" href="_time_logs_8_c_source.html">TimeLogs.C</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 12 2012 18:06:22 for fesystem by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
